# æ™ºèƒ½å†…å®¹åˆ›ä½œæµæ°´çº¿ - å¤š Agent ååŒæŠ€æœ¯æ–¹æ¡ˆ

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 ç›®æ ‡

æ„å»ºä¸€ä¸ª**å¤š Agent ååŒçš„æ™ºèƒ½å†…å®¹åˆ›ä½œç³»ç»Ÿ**ï¼Œç”¨æˆ·è¾“å…¥ä¸€ä¸ªä¸»é¢˜ï¼Œç³»ç»Ÿè‡ªåŠ¨å®Œæˆï¼š
1. èµ„æ–™è°ƒç ”
2. æ–‡ç« æ’°å†™  
3. å†…å®¹å®¡æ ¸ä¸æ¶¦è‰²
4. è¾“å‡ºæœ€ç»ˆæˆå“

### 1.2 æ ¸å¿ƒä»·å€¼

- å±•ç¤º LangGraph **å­æ™ºèƒ½ä½“ï¼ˆSubagentsï¼‰** æ¶æ„çš„å®é™…åº”ç”¨
- æ¼”ç¤ºå¤š Agent é—´çš„**ä¸²è¡Œåä½œ**ï¼ˆç ”ç©¶â†’å†™ä½œâ†’å®¡æ ¸ï¼‰
- æ”¯æŒ**äººå·¥ä»‹å…¥**ï¼ˆHuman-in-the-loopï¼‰å…³é”®èŠ‚ç‚¹å®¡æ‰¹
- å®æ—¶å±•ç¤ºå„ Agent å·¥ä½œçŠ¶æ€

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ•´ä½“æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç”¨æˆ·è¾“å…¥                                     â”‚
â”‚                    "å¸®æˆ‘å†™ä¸€ç¯‡å…³äº AI åœ¨åŒ»ç–—é¢†åŸŸåº”ç”¨çš„æ–‡ç« "                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ä¸»æ™ºèƒ½ä½“ (Supervisor)                           â”‚
â”‚                                                                          â”‚
â”‚   èŒè´£ï¼š                                                                  â”‚
â”‚   - è§£æç”¨æˆ·éœ€æ±‚ï¼Œæ‹†åˆ†ä»»åŠ¡                                                 â”‚
â”‚   - åè°ƒå„å­æ™ºèƒ½ä½“å·¥ä½œé¡ºåº                                                 â”‚
â”‚   - æ±‡æ€»ç»“æœï¼Œå†³å®šæ˜¯å¦è¿­ä»£                                                 â”‚
â”‚   - ä¸ç”¨æˆ·äº¤äº’ï¼Œå¤„ç†åé¦ˆ                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                           â”‚                           â”‚
       â”‚ 1. è°ƒç ”ä»»åŠ¡               â”‚ 2. å†™ä½œä»»åŠ¡               â”‚ 3. å®¡æ ¸ä»»åŠ¡
       â–¼                           â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç ”ç©¶å‘˜ Agent â”‚           â”‚  å†™æ‰‹ Agent   â”‚           â”‚  å®¡æ ¸å‘˜ Agent â”‚
â”‚  (Researcher) â”‚           â”‚  (Writer)     â”‚           â”‚  (Editor)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·¥å…·ï¼š        â”‚           â”‚ å·¥å…·ï¼š        â”‚           â”‚ å·¥å…·ï¼š        â”‚
â”‚ - web_search â”‚           â”‚ - (æ— å¤–éƒ¨å·¥å…·)â”‚           â”‚ - fact_check â”‚
â”‚ - wiki_searchâ”‚           â”‚              â”‚           â”‚ - grammar_checkâ”‚
â”‚ - news_searchâ”‚           â”‚              â”‚           â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å‡ºï¼š        â”‚           â”‚ è¾“å‡ºï¼š        â”‚           â”‚ è¾“å‡ºï¼š        â”‚
â”‚ - å…³é”®ä¿¡æ¯ç‚¹  â”‚           â”‚ - æ–‡ç« è‰ç¨¿    â”‚           â”‚ - ä¿®æ”¹å»ºè®®    â”‚
â”‚ - å‚è€ƒèµ„æ–™    â”‚           â”‚ - ç»“æ„å¤§çº²    â”‚           â”‚ - æ¶¦è‰²åæ–‡ç«   â”‚
â”‚ - æ•°æ®ç»Ÿè®¡    â”‚           â”‚              â”‚           â”‚ - äº‹å®æ ¸æŸ¥ç»“æœâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                           â”‚                           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   æœ€ç»ˆè¾“å‡º    â”‚
                          â”‚  å®Œæ•´æ–‡ç«      â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å­æ™ºèƒ½ä½“è¯¦ç»†è®¾è®¡

#### 2.2.1 ç ”ç©¶å‘˜ Agent (Researcher)

**èŒè´£**ï¼šæ”¶é›†ã€æ•´ç†ä¸»é¢˜ç›¸å…³çš„èƒŒæ™¯èµ„æ–™

**ç³»ç»Ÿæç¤ºè¯**ï¼š
```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„èµ„æ–™ç ”ç©¶å‘˜ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. æ ¹æ®ç»™å®šä¸»é¢˜ï¼Œæœç´¢ç›¸å…³çš„èƒŒæ™¯ä¿¡æ¯
2. æå–å…³é”®æ•°æ®ã€ç»Ÿè®¡æ•°å­—ã€ä¸“å®¶è§‚ç‚¹
3. æ•´ç†æˆç»“æ„åŒ–çš„è°ƒç ”æŠ¥å‘Š
4. æ ‡æ³¨ä¿¡æ¯æ¥æºï¼Œç¡®ä¿å¯è¿½æº¯

è¾“å‡ºæ ¼å¼ï¼š
## ä¸»é¢˜æ¦‚è¿°
[ç®€è¦ä»‹ç»]

## å…³é”®å‘ç°
- å‘ç°1ï¼šxxxï¼ˆæ¥æºï¼šxxxï¼‰
- å‘ç°2ï¼šxxxï¼ˆæ¥æºï¼šxxxï¼‰

## æ•°æ®ä¸ç»Ÿè®¡
- æ•°æ®1ï¼šxxx
- æ•°æ®2ï¼šxxx

## å‚è€ƒèµ„æ–™
1. [æ¥æºåç§°](URL)
```

**å·¥å…·**ï¼š
| å·¥å…·å | æè¿° | å‚æ•° |
|-------|------|------|
| `web_search` | é€šç”¨ç½‘é¡µæœç´¢ | `query: string` |
| `news_search` | æ–°é—»æœç´¢ï¼ˆè·å–æœ€æ–°åŠ¨æ€ï¼‰| `query: string, days: number` |
| `academic_search` | å­¦æœ¯è®ºæ–‡æœç´¢ | `query: string` |

#### 2.2.2 å†™æ‰‹ Agent (Writer)

**èŒè´£**ï¼šæ ¹æ®è°ƒç ”èµ„æ–™æ’°å†™æ–‡ç« è‰ç¨¿

**ç³»ç»Ÿæç¤ºè¯**ï¼š
```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å†…å®¹å†™æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. åŸºäºæä¾›çš„è°ƒç ”èµ„æ–™æ’°å†™æ–‡ç« 
2. ç¡®ä¿æ–‡ç« ç»“æ„æ¸…æ™°ã€é€»è¾‘ä¸¥è°¨
3. è¯­è¨€ç”ŸåŠ¨ã€æ˜“äºç†è§£
4. åˆç†å¼•ç”¨è°ƒç ”èµ„æ–™ä¸­çš„æ•°æ®å’Œè§‚ç‚¹

æ–‡ç« ç»“æ„è¦æ±‚ï¼š
- å¼•äººå…¥èƒœçš„å¼€å¤´
- æ¸…æ™°çš„ç« èŠ‚åˆ’åˆ†
- æœ‰åŠ›çš„ç»“å°¾/æ€»ç»“
- å­—æ•°ï¼šçº¦ 1500-2000 å­—
```

**å·¥å…·**ï¼šæ— ï¼ˆçº¯æ–‡æœ¬ç”Ÿæˆï¼‰

#### 2.2.3 å®¡æ ¸å‘˜ Agent (Editor)

**èŒè´£**ï¼šå®¡æ ¸æ–‡ç« è´¨é‡ï¼Œæ¶¦è‰²æ–‡å­—ï¼Œæ ¸å®äº‹å®

**ç³»ç»Ÿæç¤ºè¯**ï¼š
```
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„å†…å®¹å®¡æ ¸ç¼–è¾‘ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. æ£€æŸ¥æ–‡ç« çš„äº‹å®å‡†ç¡®æ€§
2. ä¼˜åŒ–è¯­è¨€è¡¨è¾¾ï¼Œæå‡å¯è¯»æ€§
3. æ£€æŸ¥è¯­æ³•ã€æ ‡ç‚¹é”™è¯¯
4. è¯„ä¼°æ•´ä½“è´¨é‡ï¼Œç»™å‡ºæ”¹è¿›å»ºè®®

è¾“å‡ºæ ¼å¼ï¼š
## å®¡æ ¸ç»“æœ
- æ•´ä½“è¯„åˆ†ï¼š[1-10]
- æ˜¯å¦é€šè¿‡ï¼š[æ˜¯/å¦]

## äº‹å®æ ¸æŸ¥
- [éœ€è¦æ ¸å®çš„å†…å®¹]ï¼š[æ ¸æŸ¥ç»“æœ]

## ä¿®æ”¹å»ºè®®
1. xxx
2. xxx

## æ¶¦è‰²åæ–‡ç« 
[å®Œæ•´çš„æ¶¦è‰²åæ–‡ç« ]
```

**å·¥å…·**ï¼š
| å·¥å…·å | æè¿° | å‚æ•° |
|-------|------|------|
| `fact_check` | éªŒè¯äº‹å®é™ˆè¿°çš„å‡†ç¡®æ€§ | `statement: string` |
| `grammar_check` | è¯­æ³•æ£€æŸ¥ | `text: string` |

---

## 3. æŠ€æœ¯å®ç°

### 3.1 é¡¹ç›®ç»“æ„

```
streaming-demo/
â”œâ”€â”€ server/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ agents/
â”‚       â”‚   â”œâ”€â”€ supervisor.ts      # ä¸»æ™ºèƒ½ä½“ï¼ˆåè°ƒè€…ï¼‰
â”‚       â”‚   â”œâ”€â”€ researcher.ts      # ç ”ç©¶å‘˜å­æ™ºèƒ½ä½“
â”‚       â”‚   â”œâ”€â”€ writer.ts          # å†™æ‰‹å­æ™ºèƒ½ä½“
â”‚       â”‚   â””â”€â”€ editor.ts          # å®¡æ ¸å‘˜å­æ™ºèƒ½ä½“
â”‚       â”œâ”€â”€ tools/
â”‚       â”‚   â”œâ”€â”€ search.ts          # æœç´¢å·¥å…·
â”‚       â”‚   â”œâ”€â”€ factCheck.ts       # äº‹å®æ ¸æŸ¥å·¥å…·
â”‚       â”‚   â””â”€â”€ grammarCheck.ts    # è¯­æ³•æ£€æŸ¥å·¥å…·
â”‚       â”œâ”€â”€ graph/
â”‚       â”‚   â””â”€â”€ contentPipeline.ts # LangGraph å·¥ä½œæµå®šä¹‰
â”‚       â”œâ”€â”€ server.ts
â”‚       â””â”€â”€ types.ts
â”‚
â”œâ”€â”€ client/
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ pages/
â”‚           â”œâ”€â”€ ContentCreatorPage.tsx      # ä¸»é¡µé¢
â”‚           â”œâ”€â”€ ContentCreatorPage.module.css
â”‚           â””â”€â”€ components/
â”‚               â”œâ”€â”€ AgentStatusCard.tsx     # Agent çŠ¶æ€å¡ç‰‡
â”‚               â”œâ”€â”€ ResearchReport.tsx      # è°ƒç ”æŠ¥å‘Šå±•ç¤º
â”‚               â”œâ”€â”€ ArticleDraft.tsx        # æ–‡ç« è‰ç¨¿å±•ç¤º
â”‚               â””â”€â”€ ReviewResult.tsx        # å®¡æ ¸ç»“æœå±•ç¤º
```

### 3.2 æ ¸å¿ƒä»£ç è®¾è®¡

#### 3.2.1 ä¸»æ™ºèƒ½ä½“ (Supervisor)

```typescript
// server/src/agents/supervisor.ts
import { createAgent, tool } from "langchain";
import { z } from "zod";
import { researcherAgent } from "./researcher";
import { writerAgent } from "./writer";
import { editorAgent } from "./editor";

// å°†å­æ™ºèƒ½ä½“åŒ…è£…ä¸ºå·¥å…·
const callResearcher = tool(
  async ({ topic, requirements }) => {
    const result = await researcherAgent.invoke({
      messages: [{ 
        role: "user", 
        content: `è¯·è°ƒç ”ä»¥ä¸‹ä¸»é¢˜ï¼š${topic}\n\nå…·ä½“è¦æ±‚ï¼š${requirements}` 
      }]
    });
    return result.messages.at(-1)?.content;
  },
  {
    name: "call_researcher",
    description: "è°ƒç”¨ç ”ç©¶å‘˜æ”¶é›†èµ„æ–™ã€‚å½“éœ€è¦è°ƒç ”èƒŒæ™¯ä¿¡æ¯ã€æ•°æ®ç»Ÿè®¡ã€è¡Œä¸šåŠ¨æ€æ—¶ä½¿ç”¨ã€‚",
    schema: z.object({
      topic: z.string().describe("è°ƒç ”ä¸»é¢˜"),
      requirements: z.string().describe("å…·ä½“è°ƒç ”è¦æ±‚")
    })
  }
);

const callWriter = tool(
  async ({ topic, researchData, style }) => {
    const result = await writerAgent.invoke({
      messages: [{ 
        role: "user", 
        content: `è¯·æ ¹æ®ä»¥ä¸‹èµ„æ–™æ’°å†™æ–‡ç« ï¼š
        
ä¸»é¢˜ï¼š${topic}
é£æ ¼ï¼š${style}

è°ƒç ”èµ„æ–™ï¼š
${researchData}` 
      }]
    });
    return result.messages.at(-1)?.content;
  },
  {
    name: "call_writer",
    description: "è°ƒç”¨å†™æ‰‹æ’°å†™æ–‡ç« ã€‚éœ€è¦æä¾›è°ƒç ”èµ„æ–™ä½œä¸ºå†™ä½œç´ æã€‚",
    schema: z.object({
      topic: z.string().describe("æ–‡ç« ä¸»é¢˜"),
      researchData: z.string().describe("è°ƒç ”èµ„æ–™"),
      style: z.string().describe("å†™ä½œé£æ ¼ï¼šä¸“ä¸š/é€šä¿—/å¹½é»˜ç­‰")
    })
  }
);

const callEditor = tool(
  async ({ article, focusAreas }) => {
    const result = await editorAgent.invoke({
      messages: [{ 
        role: "user", 
        content: `è¯·å®¡æ ¸å¹¶æ¶¦è‰²ä»¥ä¸‹æ–‡ç« ï¼š

${article}

é‡ç‚¹å…³æ³¨ï¼š${focusAreas}` 
      }]
    });
    return result.messages.at(-1)?.content;
  },
  {
    name: "call_editor",
    description: "è°ƒç”¨å®¡æ ¸å‘˜å®¡æ ¸æ–‡ç« ã€‚è´Ÿè´£äº‹å®æ ¸æŸ¥ã€è¯­æ³•æ£€æŸ¥ã€æ–‡å­—æ¶¦è‰²ã€‚",
    schema: z.object({
      article: z.string().describe("å¾…å®¡æ ¸çš„æ–‡ç« "),
      focusAreas: z.string().describe("é‡ç‚¹å…³æ³¨é¢†åŸŸ")
    })
  }
);

export const supervisorAgent = createAgent({
  model,
  tools: [callResearcher, callWriter, callEditor],
  systemPrompt: `ä½ æ˜¯ä¸€ä¸ªå†…å®¹åˆ›ä½œå›¢é˜Ÿçš„ä¸»ç®¡ã€‚ä½ çš„èŒè´£æ˜¯åè°ƒç ”ç©¶å‘˜ã€å†™æ‰‹å’Œå®¡æ ¸å‘˜å®Œæˆæ–‡ç« åˆ›ä½œä»»åŠ¡ã€‚

å·¥ä½œæµç¨‹ï¼š
1. åˆ†æç”¨æˆ·éœ€æ±‚ï¼Œç¡®å®šæ–‡ç« ä¸»é¢˜å’Œè¦æ±‚
2. è°ƒç”¨ç ”ç©¶å‘˜(call_researcher)æ”¶é›†èƒŒæ™¯èµ„æ–™
3. å°†è°ƒç ”ç»“æœäº¤ç»™å†™æ‰‹(call_writer)æ’°å†™è‰ç¨¿
4. å°†è‰ç¨¿äº¤ç»™å®¡æ ¸å‘˜(call_editor)å®¡æ ¸æ¶¦è‰²
5. å¦‚æœå®¡æ ¸ä¸é€šè¿‡ï¼Œæ ¹æ®åé¦ˆè¦æ±‚å†™æ‰‹ä¿®æ”¹
6. è¾“å‡ºæœ€ç»ˆæ–‡ç« 

æ³¨æ„äº‹é¡¹ï¼š
- æ¯ä¸ªæ­¥éª¤å®Œæˆåå‘ç”¨æˆ·æ±‡æŠ¥è¿›åº¦
- å¦‚æœæŸä¸ªç¯èŠ‚å‡ºç°é—®é¢˜ï¼ŒåŠæ—¶åé¦ˆå¹¶å°è¯•è§£å†³
- æœ€ç»ˆè¾“å‡ºè¦åŒ…å«å®Œæ•´çš„æ–‡ç« å†…å®¹`
});
```

#### 3.2.2 çŠ¶æ€å®šä¹‰

```typescript
// server/src/types.ts
export interface ContentPipelineState {
  messages: Message[];
  
  // ä»»åŠ¡ä¿¡æ¯
  topic: string;
  requirements: string;
  
  // å„é˜¶æ®µäº§å‡º
  researchReport?: string;
  articleDraft?: string;
  reviewResult?: {
    score: number;
    passed: boolean;
    suggestions: string[];
    revisedArticle: string;
  };
  
  // æµç¨‹æ§åˆ¶
  currentStage: "idle" | "researching" | "writing" | "reviewing" | "completed";
  iterationCount: number;
  maxIterations: number;
}
```

#### 3.2.3 å·¥ä½œæµå®šä¹‰ (LangGraph)

```typescript
// server/src/graph/contentPipeline.ts
import { StateGraph, Annotation } from "@langchain/langgraph";

const ContentState = Annotation.Root({
  messages: Annotation<Message[]>({ reducer: messagesReducer }),
  topic: Annotation<string>(),
  requirements: Annotation<string>(),
  researchReport: Annotation<string>(),
  articleDraft: Annotation<string>(),
  reviewResult: Annotation<ReviewResult>(),
  currentStage: Annotation<string>(),
  iterationCount: Annotation<number>(),
});

const workflow = new StateGraph(ContentState)
  .addNode("supervisor", supervisorNode)
  .addNode("researcher", researcherNode)
  .addNode("writer", writerNode)
  .addNode("editor", editorNode)
  .addEdge("__start__", "supervisor")
  .addConditionalEdges("supervisor", routeToAgent)
  .addEdge("researcher", "supervisor")
  .addEdge("writer", "supervisor")
  .addEdge("editor", "supervisor");

export const contentPipeline = workflow.compile({
  checkpointer: new MemorySaver(),
});
```

### 3.3 å‰ç«¯å±•ç¤ºè®¾è®¡

#### 3.3.1 æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ æ™ºèƒ½å†…å®¹åˆ›ä½œå·¥ä½œå°                                              [æ–°å»º] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è¾“å…¥åŒºåŸŸ                                                            â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ è¯·è¾“å…¥æ–‡ç« ä¸»é¢˜...                                               â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ å†™ä½œé£æ ¼ï¼š[ä¸“ä¸š â–¼]  å­—æ•°è¦æ±‚ï¼š[1500-2000 â–¼]         [å¼€å§‹åˆ›ä½œ â†’] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“Š å·¥ä½œæµè¿›åº¦              â”‚                                          â”‚ â”‚
â”‚  â”‚                           â”‚  ğŸ“ å·¥ä½œåŒº                                 â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                          â”‚ â”‚
â”‚  â”‚ â”‚ 1. ğŸ” èµ„æ–™è°ƒç ”        â”‚ â”‚  [è°ƒç ”æŠ¥å‘Š] [æ–‡ç« è‰ç¨¿] [å®¡æ ¸ç»“æœ]        â”‚ â”‚
â”‚  â”‚ â”‚    âœ… å·²å®Œæˆ          â”‚ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ â”‚    è€—æ—¶: 12s          â”‚ â”‚                                          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  ## AI åœ¨åŒ»ç–—é¢†åŸŸçš„åº”ç”¨                   â”‚ â”‚
â”‚  â”‚                           â”‚                                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  ### 1. å¼•è¨€                             â”‚ â”‚
â”‚  â”‚ â”‚ 2. âœï¸ æ–‡ç« æ’°å†™        â”‚ â”‚                                          â”‚ â”‚
â”‚  â”‚ â”‚    ğŸ”„ è¿›è¡Œä¸­...       â”‚ â”‚  äººå·¥æ™ºèƒ½æ­£åœ¨æ·±åˆ»æ”¹å˜åŒ»ç–—è¡Œä¸š...         â”‚ â”‚
â”‚  â”‚ â”‚    å­—æ•°: 856/1500     â”‚ â”‚                                          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  ### 2. è¯Šæ–­è¾…åŠ©                          â”‚ â”‚
â”‚  â”‚                           â”‚                                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  æ ¹æ®è°ƒç ”æ•°æ®æ˜¾ç¤ºï¼ŒAI è¾…åŠ©è¯Šæ–­çš„          â”‚ â”‚
â”‚  â”‚ â”‚ 3. ğŸ“‹ å†…å®¹å®¡æ ¸        â”‚ â”‚  å‡†ç¡®ç‡å·²è¾¾åˆ° 95% ä»¥ä¸Š...                 â”‚ â”‚
â”‚  â”‚ â”‚    â³ ç­‰å¾…ä¸­          â”‚ â”‚                                          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                          â”‚ â”‚
â”‚  â”‚                           â”‚                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’¬ ä¸ä¸»ç®¡å¯¹è¯                                                       â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ ğŸ¤– ä¸»ç®¡ï¼šè°ƒç ”å·²å®Œæˆï¼Œå…±æ”¶é›†åˆ° 12 æ¡å…³é”®ä¿¡æ¯ã€‚ç°åœ¨å¼€å§‹æ’°å†™æ–‡ç« ...    â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ ä½ ï¼šæ–‡ç« é£æ ¼å¯ä»¥æ›´åŠ é€šä¿—æ˜“æ‡‚ä¸€äº›å—ï¼Ÿ                             â”‚   â”‚
â”‚  â”‚ ğŸ¤– ä¸»ç®¡ï¼šå¥½çš„ï¼Œæˆ‘ä¼šè®©å†™æ‰‹è°ƒæ•´é£æ ¼ï¼Œä½¿ç”¨æ›´å¤šç”Ÿæ´»åŒ–çš„ä¾‹å­...           â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ è¾“å…¥åé¦ˆæˆ–ä¿®æ”¹æ„è§...                                           â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.2 Agent çŠ¶æ€å¡ç‰‡è®¾è®¡

```tsx
// çŠ¶æ€å¡ç‰‡ç»„ä»¶
interface AgentStatusCardProps {
  name: string;
  icon: string;
  status: "idle" | "working" | "completed" | "error";
  progress?: number;
  duration?: number;
  details?: string;
}

// çŠ¶æ€æ ·å¼æ˜ å°„
const statusStyles = {
  idle: { color: "gray", icon: "â³", text: "ç­‰å¾…ä¸­" },
  working: { color: "blue", icon: "ğŸ”„", text: "è¿›è¡Œä¸­" },
  completed: { color: "green", icon: "âœ…", text: "å·²å®Œæˆ" },
  error: { color: "red", icon: "âŒ", text: "å‡ºé”™" },
};
```

---

## 4. æ•°æ®æµè®¾è®¡

### 4.1 æ¶ˆæ¯æµè½¬

```
ç”¨æˆ·è¾“å…¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supervisor æ¥æ”¶ä»»åŠ¡                                              â”‚
â”‚ {                                                                â”‚
â”‚   type: "human",                                                 â”‚
â”‚   content: "å¸®æˆ‘å†™ä¸€ç¯‡å…³äº AI åœ¨åŒ»ç–—é¢†åŸŸåº”ç”¨çš„æ–‡ç« "                â”‚
â”‚ }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supervisor è°ƒç”¨ Researcher                                       â”‚
â”‚ tool_call: {                                                     â”‚
â”‚   name: "call_researcher",                                       â”‚
â”‚   args: { topic: "AI åŒ»ç–—åº”ç”¨", requirements: "..." }            â”‚
â”‚ }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Researcher è¿”å›è°ƒç ”æŠ¥å‘Š                                          â”‚
â”‚ tool_result: {                                                   â”‚
â”‚   content: "## è°ƒç ”æŠ¥å‘Š\n### å…³é”®å‘ç°..."                         â”‚
â”‚ }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                              (ç»§ç»­...)
```

### 4.2 çŠ¶æ€æ›´æ–°

```typescript
// ä½¿ç”¨ useStream çš„çŠ¶æ€ç›‘å¬
const stream = useStream({
  assistantId: "content-creator",
  apiUrl: "http://localhost:2024",
  threadId,
  onThreadId: setThreadId,
});

// ä» values ä¸­æå–å„é˜¶æ®µäº§å‡º
const { 
  currentStage,
  researchReport,
  articleDraft,
  reviewResult 
} = stream.values;

// ä» toolCalls ä¸­è·å–å½“å‰å·¥ä½œçš„ Agent
const activeAgent = stream.toolCalls.find(tc => tc.state === "pending");
```

---

## 5. äººå·¥ä»‹å…¥ç‚¹ (Human-in-the-loop)

### 5.1 å¯é…ç½®çš„ä»‹å…¥ç‚¹

| é˜¶æ®µ | ä»‹å…¥ç±»å‹ | æè¿° |
|------|---------|------|
| è°ƒç ”å®Œæˆå | å¯é€‰ | ç”¨æˆ·ç¡®è®¤è°ƒç ”æ–¹å‘æ˜¯å¦æ­£ç¡® |
| è‰ç¨¿å®Œæˆå | æ¨è | ç”¨æˆ·å®¡é˜…è‰ç¨¿ï¼Œæå‡ºä¿®æ”¹æ„è§ |
| å®¡æ ¸ä¸é€šè¿‡æ—¶ | å¿…é¡» | ç”¨æˆ·å†³å®šæ˜¯å¦æ¥å—ä¿®æ”¹å»ºè®® |

### 5.2 å®ç°æ–¹å¼

```typescript
// ä½¿ç”¨ LangGraph çš„ interrupt åŠŸèƒ½
const writerNode = async (state: ContentState) => {
  const draft = await writerAgent.invoke({...});
  
  // åœ¨å…³é”®èŠ‚ç‚¹æš‚åœï¼Œç­‰å¾…ç”¨æˆ·åé¦ˆ
  const feedback = await interrupt({
    question: "è¯·å®¡é˜…æ–‡ç« è‰ç¨¿ï¼Œæ˜¯å¦æ»¡æ„ï¼Ÿ",
    options: ["æ»¡æ„ï¼Œç»§ç»­å®¡æ ¸", "éœ€è¦ä¿®æ”¹", "é‡æ–°æ’°å†™"]
  });
  
  if (feedback === "éœ€è¦ä¿®æ”¹") {
    // ç­‰å¾…ç”¨æˆ·è¾“å…¥å…·ä½“ä¿®æ”¹æ„è§
    const modifications = await interrupt({
      question: "è¯·è¾“å…¥ä¿®æ”¹æ„è§ï¼š"
    });
    // æ ¹æ®ä¿®æ”¹æ„è§é‡æ–°ç”Ÿæˆ
    return reviseArticle(draft, modifications);
  }
  
  return { articleDraft: draft };
};
```

---

## 6. é”™è¯¯å¤„ç†

### 6.1 é”™è¯¯ç±»å‹

| é”™è¯¯ç±»å‹ | å¤„ç†ç­–ç•¥ |
|---------|---------|
| å­æ™ºèƒ½ä½“è¶…æ—¶ | é‡è¯• 3 æ¬¡ï¼Œå¤±è´¥åé€šçŸ¥ä¸»ç®¡ |
| æœç´¢ API å¤±è´¥ | åˆ‡æ¢å¤‡ç”¨ API æˆ–è¿”å›ç¼“å­˜ç»“æœ |
| å†…å®¹è´¨é‡ä¸è¾¾æ ‡ | æœ€å¤šè¿­ä»£ 3 æ¬¡ï¼Œè¶…è¿‡åäººå·¥ä»‹å…¥ |
| LLM è¯·æ±‚å¤±è´¥ | æŒ‡æ•°é€€é¿é‡è¯• |

### 6.2 é™çº§ç­–ç•¥

```typescript
// å·¥å…·è°ƒç”¨çš„å®¹é”™åŒ…è£…
const safeToolCall = async (toolFn: Function, fallback: any) => {
  try {
    return await withRetry(toolFn, { maxRetries: 3 });
  } catch (error) {
    console.error("Tool call failed:", error);
    return fallback;
  }
};
```

---

## 7. æ€§èƒ½ä¼˜åŒ–

### 7.1 å¹¶è¡Œè°ƒç ”

```typescript
// ç ”ç©¶å‘˜å¯ä»¥å¹¶è¡Œæœç´¢å¤šä¸ªæ¥æº
const researcherNode = async (state: ContentState) => {
  const [webResults, newsResults, academicResults] = await Promise.all([
    webSearch(state.topic),
    newsSearch(state.topic, 7),
    academicSearch(state.topic)
  ]);
  
  return {
    researchReport: combineResults(webResults, newsResults, academicResults)
  };
};
```

### 7.2 æµå¼è¾“å‡º

- æ‰€æœ‰ Agent çš„è¾“å‡ºéƒ½æ”¯æŒæµå¼è¿”å›
- å†™æ‰‹æ’°å†™æ–‡ç« æ—¶é€æ®µè¾“å‡ºï¼Œç”¨æˆ·å¯å®æ—¶çœ‹åˆ°è¿›åº¦
- å®¡æ ¸å‘˜çš„ä¿®æ”¹å»ºè®®è¾¹ç”Ÿæˆè¾¹å±•ç¤º

---

## 8. æ‰©å±•æ€§è®¾è®¡

### 8.1 å¯æ‰©å±•çš„ Agent æ’æ§½

```typescript
// æ”¯æŒåŠ¨æ€æ³¨å†Œæ–°çš„å­æ™ºèƒ½ä½“
const agentRegistry = new Map<string, Agent>();

// æ³¨å†Œæ–° Agent
agentRegistry.set("translator", translatorAgent);  // ç¿»è¯‘
agentRegistry.set("illustrator", illustratorAgent);  // é…å›¾
agentRegistry.set("seo", seoAgent);  // SEO ä¼˜åŒ–

// å•ä¸€åˆ†å‘å·¥å…·æ¨¡å¼
const callAgent = tool(
  async ({ agentName, task }) => {
    const agent = agentRegistry.get(agentName);
    if (!agent) throw new Error(`Unknown agent: ${agentName}`);
    return await agent.invoke({ messages: [{ role: "user", content: task }] });
  },
  {
    name: "call_agent",
    description: "è°ƒç”¨æŒ‡å®šçš„å­æ™ºèƒ½ä½“æ‰§è¡Œä»»åŠ¡",
    schema: z.object({
      agentName: z.enum(["researcher", "writer", "editor", "translator", "illustrator", "seo"]),
      task: z.string()
    })
  }
);
```

### 8.2 æœªæ¥æ‰©å±•æ–¹å‘

1. **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ·»åŠ ç¿»è¯‘ Agent
2. **é…å›¾åŠŸèƒ½**ï¼šæ·»åŠ å›¾ç‰‡ç”Ÿæˆ/æœç´¢ Agent
3. **SEO ä¼˜åŒ–**ï¼šæ·»åŠ å…³é”®è¯ä¼˜åŒ– Agent
4. **å¤šå¹³å°å‘å¸ƒ**ï¼šæ·»åŠ æ ¼å¼è½¬æ¢ Agentï¼ˆå¾®ä¿¡ã€çŸ¥ä¹ã€åšå®¢ç­‰ï¼‰
5. **åä½œæ¨¡å¼**ï¼šæ”¯æŒå¤šäººåŒæ—¶ç¼–è¾‘å’Œè¯„è®º

---

## 9. å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„ï¼ˆ3å¤©ï¼‰
- [ ] æ­å»ºå­æ™ºèƒ½ä½“æ¡†æ¶
- [ ] å®ç°ä¸»ç®¡ Agent
- [ ] å®ç°ç ”ç©¶å‘˜ Agentï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæœç´¢ï¼‰

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ4å¤©ï¼‰
- [ ] å®ç°å†™æ‰‹ Agent
- [ ] å®ç°å®¡æ ¸å‘˜ Agent
- [ ] å®Œæˆå·¥ä½œæµä¸²è”

### ç¬¬ä¸‰é˜¶æ®µï¼šå‰ç«¯å±•ç¤ºï¼ˆ3å¤©ï¼‰
- [ ] å®ç°è¿›åº¦å±•ç¤º UI
- [ ] å®ç°å„é˜¶æ®µäº§å‡ºå±•ç¤º
- [ ] å®ç°å¯¹è¯äº¤äº’ç•Œé¢

### ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–å®Œå–„ï¼ˆ2å¤©ï¼‰
- [ ] æ·»åŠ äººå·¥ä»‹å…¥ç‚¹
- [ ] é”™è¯¯å¤„ç†å’Œé‡è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–

---

## 10. æŠ€æœ¯æ ˆæ€»ç»“

| å±‚çº§ | æŠ€æœ¯é€‰å‹ |
|------|---------|
| å‰ç«¯æ¡†æ¶ | React + TypeScript + Vite |
| çŠ¶æ€ç®¡ç† | useStream (LangGraph SDK) |
| æ ·å¼ | CSS Modules |
| åç«¯æ¡†æ¶ | Express.js |
| Agent æ¡†æ¶ | LangChain + LangGraph |
| LLM | DeepSeek / OpenAI |
| æŒä¹…åŒ– | MemorySaver (å¼€å‘) / PostgreSQL (ç”Ÿäº§) |
