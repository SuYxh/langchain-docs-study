# æˆ¿äº§ç›´æ’­è¯æœ¯ç”Ÿæˆå·¥å…· - æŠ€æœ¯æ–¹æ¡ˆ

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

æˆ¿äº§è¡Œä¸šç›´æ’­å¸¦è´§æ—¥ç›Šæ™®åŠï¼Œä½†ä¼˜è´¨ç›´æ’­è¯æœ¯çš„ç”Ÿæˆä»ç„¶ä¾èµ–äººå·¥ç»éªŒã€‚æœ¬é¡¹ç›®æ—¨åœ¨æ„å»ºä¸€ä¸ªæ™ºèƒ½åŒ–çš„ç›´æ’­è¯æœ¯ç”Ÿæˆå·¥å…·ï¼Œé€šè¿‡ AI æŠ€æœ¯ä»å†å²ç›´æ’­ä¸­å­¦ä¹ ä¼˜ç§€è¯æœ¯æ¨¡å¼ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆæŠ–éŸ³å¹³å°è§„èŒƒçš„ä¸“ä¸šç›´æ’­è„šæœ¬ã€‚

### 1.2 æ ¸å¿ƒç›®æ ‡

- æ”¯æŒä¸¤ç§è¾“å…¥æ¨¡å¼ï¼Œçµæ´»é€‚åº”ä¸åŒåœºæ™¯
- ç”Ÿæˆç¬¦åˆæŠ–éŸ³å¹³å°é£æ ¼çš„ç›´æ’­è¯æœ¯è„šæœ¬
- ç¡®ä¿å†…å®¹åˆè§„ï¼Œè‡ªåŠ¨æ£€æµ‹å¹¶æ›¿æ¢è¿ç¦è¯
- æ”¯æŒå¤šç§æ¥¼ç›˜ç±»å‹ï¼ˆæ™®é€šä½å®…ã€è±ªå®…ç­‰ï¼‰

### 1.3 ä¸¤ç§è¾“å…¥æ¨¡å¼

æœ¬å·¥å…·æ”¯æŒä¸¤ç§è¾“å…¥æ¨¡å¼ï¼Œæ»¡è¶³ä¸åŒä½¿ç”¨åœºæ™¯ï¼š

| æ¨¡å¼ | è¾“å…¥æ–¹å¼ | é€‚ç”¨åœºæ™¯ | ä¿¡æ¯æå– Agent |
|-----|---------|---------|---------------|
| **æ¨¡å¼A: ASRæå–** | å†å²ç›´æ’­ASRæ–‡æœ¬ | ä»è¿‡å¾€ç›´æ’­ä¸­å­¦ä¹  | âœ… éœ€è¦ |
| **æ¨¡å¼B: æ‰‹åŠ¨è¾“å…¥** | ç”¨æˆ·å¡«å†™æ¥¼ç›˜ä¿¡æ¯è¡¨å• | æ–°æ¥¼ç›˜ã€å¿«é€Ÿç”Ÿæˆ | â­ï¸ è·³è¿‡ |

#### æ¨¡å¼A: ASR æ–‡æœ¬è‡ªåŠ¨æå–

ä»å†å²ç›´æ’­çš„ ASR çº¯æ–‡æœ¬ä¸­è‡ªåŠ¨æå–æ¥¼ç›˜ä¿¡æ¯ï¼Œé€‚åˆï¼š
- å¤ç›˜ä¼˜åŒ–å†å²ç›´æ’­è¯æœ¯
- å­¦ä¹ ä¼˜ç§€ä¸»æ’­çš„è¯æœ¯æ¨¡å¼
- æ‰¹é‡å¤„ç†å†å²å†…å®¹

#### æ¨¡å¼B: æ‰‹åŠ¨è¾“å…¥æ¥¼ç›˜ä¿¡æ¯

ç”¨æˆ·ç›´æ¥å¡«å†™ç»“æ„åŒ–ä¿¡æ¯ï¼Œé€‚åˆï¼š
- æ–°æ¥¼ç›˜é¦–æ¬¡ç›´æ’­
- å¿«é€Ÿç”Ÿæˆè„šæœ¬
- ç²¾ç¡®æ§åˆ¶å†…å®¹

**è¾“å…¥å­—æ®µ**:
| å­—æ®µ | æ˜¯å¦å¿…å¡« | è¯´æ˜ |
|-----|---------|------|
| æ¥¼ç›˜åŸºæœ¬ä¿¡æ¯ | âœ… å¿…å¡« | é¡¹ç›®åç§°ã€ä½ç½®ã€å¼€å‘å•†ã€æˆ·å‹ç­‰ |
| å–ç‚¹ä¿¡æ¯ | â­• å¯é€‰ | æ ¸å¿ƒå–ç‚¹ã€å·®å¼‚åŒ–ä¼˜åŠ¿ |
| ç¦åˆ©ä¿¡æ¯ | â­• å¯é€‰ | å½“å‰ä¼˜æƒ æ´»åŠ¨ã€ä¸“å±ç¦åˆ© |

### 1.4 ä¸šåŠ¡æµç¨‹

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚            ç”¨æˆ·é€‰æ‹©è¾“å…¥æ¨¡å¼           â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â–¼                                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   æ¨¡å¼A: ASR    â”‚                         â”‚  æ¨¡å¼B: æ‰‹åŠ¨è¾“å…¥  â”‚
              â”‚   æ–‡æœ¬è¾“å…¥      â”‚                         â”‚  æ¥¼ç›˜ä¿¡æ¯è¡¨å•    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚                                           â”‚
                       â–¼                                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
              â”‚  1. ä¿¡æ¯æå–    â”‚                                  â”‚
              â”‚  (ASRæ–‡æœ¬è§£æ)  â”‚                                  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
                       â”‚                                           â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  ç»“æ„åŒ–æ¥¼ç›˜ä¿¡æ¯  â”‚
                              â”‚  (ç»Ÿä¸€æ•°æ®æ ¼å¼)  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  2. è„šæœ¬ç”Ÿæˆ    â”‚ â”€â”€â–¶ â”‚  3. è¿ç¦è¯æ£€æµ‹  â”‚ â”€â”€â–¶ â”‚  4. æ¶¦è‰²è¾“å‡º    â”‚
    â”‚  (æŠ–éŸ³è¯æœ¯)     â”‚     â”‚  (åˆè§„æ£€æŸ¥)     â”‚     â”‚  (æœ€ç»ˆè„šæœ¬)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                       â”‚                       â”‚
              â–¼                       â–¼                       â–¼
         åˆç‰ˆç›´æ’­è„šæœ¬           åˆè§„æ£€æµ‹æŠ¥å‘Š          æœ€ç»ˆç›´æ’­è„šæœ¬
```

---

## äºŒã€æŠ€æœ¯æ¶æ„

### 2.1 æ•´ä½“æ¶æ„å›¾

```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚           RAG çŸ¥è¯†åº“ (å‘é‡æ•°æ®åº“)          â”‚
                          â”‚  â€¢ å†å²ä¼˜ç§€è¯æœ¯  â€¢ æ¥¼ç›˜èµ„æ–™æ¨¡æ¿            â”‚
                          â”‚  â€¢ æŠ–éŸ³è¯æœ¯æ¨¡æ¿  â€¢ è¡Œä¸šæœ¯è¯­åº“              â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¾“å…¥      â”‚    â”‚              LangGraph å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ                       â”‚
â”‚             â”‚    â”‚                                                              â”‚
â”‚ æ¨¡å¼A:      â”‚    â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚ ASR æ–‡æœ¬    â”‚â”€â”€â”€â–¶â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                     â”‚                   â”‚
â”‚             â”‚    â”‚  â”‚ ä¿¡æ¯æå– â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚                   â”‚
â”‚ â”€ â”€ â”€ â”€ â”€  â”‚    â”‚  â”‚  Agent  â”‚      â”‚   ç»“æ„åŒ–æ¥¼ç›˜ä¿¡æ¯     â”‚                   â”‚
â”‚             â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   (ç»Ÿä¸€æ•°æ®æ ¼å¼)     â”‚                   â”‚
â”‚ æ¨¡å¼B:      â”‚    â”‚                    â”‚                     â”‚                   â”‚
â”‚ æ‰‹åŠ¨è¾“å…¥    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚                   â”‚
â”‚ â€¢ æ¥¼ç›˜ä¿¡æ¯  â”‚    â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚ â€¢ å–ç‚¹(å¯é€‰)â”‚    â”‚                               â”‚                              â”‚
â”‚ â€¢ ç¦åˆ©(å¯é€‰)â”‚    â”‚                               â–¼                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
                   â”‚                    â”‚     è„šæœ¬ç”Ÿæˆ        â”‚                   â”‚
                   â”‚                    â”‚      Agent         â”‚                   â”‚
                   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
                   â”‚                               â”‚                              â”‚
                   â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
                   â”‚         â–¼                                           â–¼        â”‚
                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                   â”‚  â”‚  åˆè§„æ£€æµ‹   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  æ¶¦è‰²è¾“å‡º   â”‚   â”‚
                   â”‚  â”‚   Agent    â”‚        (å¦‚æœ‰è¿ç¦è¯å¾ªç¯)     â”‚   Agent    â”‚   â”‚
                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚           æœ€ç»ˆè¾“å‡ºï¼šæŠ–éŸ³ç›´æ’­è„šæœ¬           â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æŠ€æœ¯é€‰å‹

| æŠ€æœ¯é¢†åŸŸ | é€‰å‹ | è¯´æ˜ |
|---------|------|------|
| **Agent æ¡†æ¶** | LangGraph | ç®¡ç†å¤šæ™ºèƒ½ä½“åä½œæµç¨‹ã€çŠ¶æ€ä¼ é€’ |
| **LLM** | GPT-4 / DeepSeek | æ ¸å¿ƒæ¨ç†èƒ½åŠ› |
| **å‘é‡æ•°æ®åº“** | Chroma / Pinecone | å­˜å‚¨å†å²è¯æœ¯ã€æ¥¼ç›˜æ¨¡æ¿ |
| **ç»“æ„åŒ–è¾“å‡º** | Zod Schema | å®šä¹‰æ¥¼ç›˜ä¿¡æ¯ç»“æ„ |
| **åç«¯æ¡†æ¶** | Express + TypeScript | API æœåŠ¡ |
| **å‰ç«¯æ¡†æ¶** | React + Vite | ç”¨æˆ·äº¤äº’ç•Œé¢ |

---

## ä¸‰ã€å¤šæ™ºèƒ½ä½“è®¾è®¡

### 3.1 Agent è§’è‰²å®šä¹‰

#### Agent 1: ä¿¡æ¯æå– Agent (PropertyExtractor)

**èŒè´£**: ä» ASR æ–‡æœ¬ä¸­æå–ç»“æ„åŒ–æ¥¼ç›˜ä¿¡æ¯

**è¾“å…¥**: å†å²ç›´æ’­ ASR çº¯æ–‡æœ¬

**è¾“å‡º**: ç»“æ„åŒ–æ¥¼ç›˜ä¿¡æ¯ï¼ˆJSONï¼‰

**æ ¸å¿ƒèƒ½åŠ›**:
- NLP å®ä½“è¯†åˆ«
- ä¿¡æ¯å½’ç±»ä¸ç»“æ„åŒ–
- æ•°æ®æ¸…æ´—ä¸æ ‡å‡†åŒ–

**è¾“å‡ºæ•°æ®ç»“æ„** (ç»Ÿä¸€æ•°æ®æ ¼å¼ï¼Œä¸¤ç§æ¨¡å¼å…±ç”¨):
```typescript
interface PropertyInfo {
  // ==================== åŸºæœ¬ä¿¡æ¯ (å¿…å¡«) ====================
  projectName: string;          // é¡¹ç›®åç§°
  developer?: string;           // å¼€å‘å•†
  location: string;             // é¡¹ç›®ä½ç½®
  propertyType: 'residential' | 'luxury';  // æ¥¼ç›˜ç±»å‹
  
  // æˆ·å‹ä¿¡æ¯
  layouts: {
    type: string;               // å¦‚ "ä¸‰å®¤ä¸¤å…"
    area?: string;              // é¢ç§¯
    price?: string;             // å•ä»·/æ€»ä»·
    features?: string[];        // æˆ·å‹äº®ç‚¹
  }[];
  
  // å‘¨è¾¹é…å¥—
  surroundings?: {
    transportation?: string[];  // äº¤é€šé…å¥—
    education?: string[];       // æ•™è‚²èµ„æº
    commercial?: string[];      // å•†ä¸šé…å¥—
    medical?: string[];         // åŒ»ç–—èµ„æº
    landscape?: string[];       // æ™¯è§‚èµ„æº
  };
  
  // ==================== å–ç‚¹ä¿¡æ¯ (å¯é€‰) ====================
  sellingPoints?: string[];     // æ ¸å¿ƒå–ç‚¹ - ç”¨æˆ·å¯æ‰‹åŠ¨è¾“å…¥æˆ–AIæå–
  
  // ==================== ç¦åˆ©ä¿¡æ¯ (å¯é€‰) ====================
  promotions?: string[];        // å½“å‰ä¼˜æƒ æ´»åŠ¨
  gifts?: string[];             // åˆ°è®¿ç¤¼å“/æˆäº¤ç¤¼å“
  discounts?: string[];         // æŠ˜æ‰£ä¿¡æ¯
}

// æ¨¡å¼B æ‰‹åŠ¨è¾“å…¥çš„è¡¨å•ç»“æ„
interface ManualInputForm {
  // å¿…å¡«å­—æ®µ
  projectName: string;          // é¡¹ç›®åç§°
  location: string;             // é¡¹ç›®ä½ç½®
  propertyType: 'residential' | 'luxury';  // æ¥¼ç›˜ç±»å‹
  layoutDescription: string;    // æˆ·å‹æè¿°ï¼ˆè‡ªç”±æ–‡æœ¬ï¼‰
  
  // å¯é€‰å­—æ®µ - å–ç‚¹ä¿¡æ¯
  sellingPoints?: string;       // æ ¸å¿ƒå–ç‚¹ï¼ˆæ¢è¡Œåˆ†éš”å¤šæ¡ï¼‰
  
  // å¯é€‰å­—æ®µ - ç¦åˆ©ä¿¡æ¯
  promotions?: string;          // ä¼˜æƒ æ´»åŠ¨æè¿°
  gifts?: string;               // ç¤¼å“ä¿¡æ¯
}
```

---

#### Agent 2: è„šæœ¬ç”Ÿæˆ Agent (ScriptGenerator)

**èŒè´£**: æ ¹æ®æ¥¼ç›˜ä¿¡æ¯ç”ŸæˆæŠ–éŸ³ç›´æ’­è¯æœ¯

**è¾“å…¥**: ç»“æ„åŒ–æ¥¼ç›˜ä¿¡æ¯ + RAG æ£€ç´¢çš„ç›¸ä¼¼è¯æœ¯

**è¾“å‡º**: åˆç‰ˆç›´æ’­è„šæœ¬

**æ ¸å¿ƒèƒ½åŠ›**:
- æŠ–éŸ³å¹³å°è¯æœ¯é£æ ¼
- è¥é”€æ–‡æ¡ˆæ’°å†™
- èŠ‚å¥æŠŠæ§

**è„šæœ¬ç»“æ„**:
```typescript
interface LiveScript {
  // å¼€åœºç™½ (30ç§’)
  opening: {
    hook: string;               // å¼€åœºé’©å­
    introduction: string;       // é¡¹ç›®å¼•å…¥
  };
  
  // é¡¹ç›®ä»‹ç» (2-3åˆ†é’Ÿ)
  projectIntro: {
    overview: string;           // é¡¹ç›®æ¦‚å†µ
    location: string;           // åŒºä½ä»‹ç»
    developer: string;          // å¼€å‘å•†èƒŒä¹¦
  };
  
  // æˆ·å‹è®²è§£ (3-5åˆ†é’Ÿ)
  layoutIntro: {
    layoutName: string;
    script: string;
    sellingPoints: string[];
  }[];
  
  // å‘¨è¾¹é…å¥— (2-3åˆ†é’Ÿ)
  surroundingsIntro: string;
  
  // ç•™èµ„å¼•å¯¼ (ç©¿æ’)
  leadGeneration: {
    timing: string;             // æ’å…¥æ—¶æœº
    script: string;             // ç•™èµ„è¯æœ¯
  }[];
  
  // ç¦åˆ©/é€¼å• (1-2åˆ†é’Ÿ)
  promotion: {
    benefits: string;           // ç¦åˆ©ä»‹ç»
    urgency: string;            // ç´§è¿«æ„Ÿè¥é€ 
    callToAction: string;       // è¡ŒåŠ¨å·å¬
  };
  
  // æ”¶å°¾ (30ç§’)
  closing: string;
}
```

---

#### Agent 3: åˆè§„æ£€æµ‹ Agent (ComplianceChecker)

**èŒè´£**: æ£€æµ‹è¿ç¦è¯ï¼Œç¡®ä¿å†…å®¹åˆè§„

**è¾“å…¥**: åˆç‰ˆç›´æ’­è„šæœ¬

**è¾“å‡º**: åˆè§„æ£€æµ‹æŠ¥å‘Š + ä¿®æ”¹å»ºè®®

**æ ¸å¿ƒèƒ½åŠ›**:
- è¿ç¦è¯å¿«é€ŸåŒ¹é…
- è¯­å¢ƒç†è§£åˆ¤æ–­
- åˆè§„æ›¿æ¢å»ºè®®

**å†…ç½®è¿ç¦è¯è§„åˆ™**:
```typescript
const prohibitedWords = {
  // ç»å¯¹åŒ–ç”¨è¯­
  absolute: [
    'æœ€', 'ç¬¬ä¸€', 'å”¯ä¸€', 'é¦–é€‰', 'é¡¶çº§', 'æå“', 'ç»æ— ä»…æœ‰',
    'å²æ— å‰ä¾‹', 'ä¸‡èƒ½', 'åŒ…ä½ æ»¡æ„', 'ä¿è¯å‡å€¼'
  ],
  
  // è™šå‡æ‰¿è¯º
  falsePromise: [
    'ä¿è¯', 'æ‰¿è¯º', 'è‚¯å®š', 'å¿…ç„¶', 'ä¸€å®šæ¶¨',
    'ç¨³èµšä¸èµ”', 'æŠ•èµ„å›æŠ¥', 'é›¶é£é™©'
  ],
  
  // å­¦åŒºç›¸å…³
  education: [
    'å­¦åŒºæˆ¿', 'å­¦ä½æˆ¿', 'å¯¹å£å­¦æ ¡', 'åˆ’ç‰‡',
    'ä¿è¯å…¥å­¦', 'åæ ¡'
  ],
  
  // ä»·æ ¼ç›¸å…³
  price: [
    'æœ€ä½ä»·', 'è·³æ¥¼ä»·', 'äºæœ¬å–', 'å…¨åŸæœ€ä½',
    'ä»·æ ¼æœ€ä¼˜', 'å²ä¸Šæœ€ä½'
  ],
  
  // å¤¸å¤§å®£ä¼ 
  exaggeration: [
    'å›½é™…', 'ä¸–ç•Œçº§', 'é¡¶å°–', 'å¥¢å', 'çš‡å®¶',
    'è‡³å°Š', 'å¸ç‹', 'è±ªé—¨'
  ]
};

// æ›¿æ¢å»ºè®®æ˜ å°„
const replacementSuggestions = {
  'æœ€å¥½': 'ä¼˜è´¨',
  'ç¬¬ä¸€': 'é¢†å…ˆ',
  'å­¦åŒºæˆ¿': 'å‘¨è¾¹æ•™è‚²èµ„æºä¸°å¯Œ',
  'ä¿è¯å‡å€¼': 'å…·æœ‰æŠ•èµ„æ½œåŠ›',
  'æœ€ä½ä»·': 'ä¼˜æƒ ä»·æ ¼',
  // ... æ›´å¤šæ˜ å°„
};
```

---

#### Agent 4: æ¶¦è‰²è¾“å‡º Agent (ScriptPolisher)

**èŒè´£**: æœ€ç»ˆæ¶¦è‰²ï¼Œä¼˜åŒ–è¯­è¨€é£æ ¼

**è¾“å…¥**: åˆè§„ä¿®æ”¹åçš„è„šæœ¬

**è¾“å‡º**: æœ€ç»ˆç›´æ’­è„šæœ¬

**æ ¸å¿ƒèƒ½åŠ›**:
- å£è¯­åŒ–å¤„ç†
- èŠ‚å¥ä¼˜åŒ–
- æƒ…æ„Ÿå¼•å¯¼
- äº’åŠ¨è®¾è®¡

**æ¶¦è‰²è§„åˆ™**:
- å¥å­é•¿åº¦æ§åˆ¶ï¼ˆé€‚åˆå£æ’­ï¼‰
- æ·»åŠ äº’åŠ¨å¼•å¯¼è¯­ï¼ˆ"å®¶äººä»¬"ã€"æ‡‚çš„æ‰£1"ï¼‰
- æƒ…æ„Ÿè¯æ±‡å¢å¼º
- èŠ‚å¥æ ‡è®°ï¼ˆåœé¡¿ã€é‡éŸ³ï¼‰

---

### 3.2 Agent åä½œæµç¨‹

```typescript
// LangGraph çŠ¶æ€å®šä¹‰
interface ScriptGenerationState {
  // ==================== è¾“å…¥æ¨¡å¼ ====================
  inputMode: 'asr' | 'manual';        // è¾“å…¥æ¨¡å¼
  
  // æ¨¡å¼Aè¾“å…¥
  asrText?: string;                   // ASR åŸæ–‡ (æ¨¡å¼A)
  
  // æ¨¡å¼Bè¾“å…¥
  manualInput?: ManualInputForm;      // æ‰‹åŠ¨è¾“å…¥è¡¨å• (æ¨¡å¼B)
  
  // ==================== ä¸­é—´çŠ¶æ€ ====================
  propertyInfo: PropertyInfo | null;  // ç»“æ„åŒ–æ¥¼ç›˜ä¿¡æ¯ï¼ˆä¸¤ç§æ¨¡å¼ç»Ÿä¸€æ ¼å¼ï¼‰
  draftScript: LiveScript | null;     // åˆç‰ˆè„šæœ¬
  complianceReport: ComplianceReport | null;  // åˆè§„æŠ¥å‘Š
  complianceRetryCount: number;       // åˆè§„ä¿®æ”¹é‡è¯•æ¬¡æ•°
  
  // ==================== è¾“å‡º ====================
  finalScript: string | null;         // æœ€ç»ˆè„šæœ¬
  
  // ==================== æµç¨‹æ§åˆ¶ ====================
  currentStage: 'extracting' | 'generating' | 'checking' | 'polishing' | 'completed';
  errors: string[];
}

// è·¯ç”±ï¼šæ ¹æ®è¾“å…¥æ¨¡å¼å†³å®šæ˜¯å¦è·³è¿‡ä¿¡æ¯æå–
function routeByInputMode(state: ScriptGenerationState) {
  if (state.inputMode === 'manual') {
    return "generator";  // æ¨¡å¼B: è·³è¿‡æå–ï¼Œç›´æ¥ç”Ÿæˆ
  }
  return "extractor";    // æ¨¡å¼A: éœ€è¦ä¿¡æ¯æå–
}

// è·¯ç”±ï¼šåˆè§„æ£€æµ‹åçš„æµè½¬
function routeAfterCompliance(state: ScriptGenerationState) {
  if (state.complianceReport?.passed) {
    return "polisher";   // é€šè¿‡ï¼Œè¿›å…¥æ¶¦è‰²
  }
  if (state.complianceRetryCount >= 3) {
    return "polisher";   // è¶…è¿‡é‡è¯•æ¬¡æ•°ï¼Œå¼ºåˆ¶è¿›å…¥æ¶¦è‰²ï¼ˆäººå·¥å¤„ç†ï¼‰
  }
  return "generator";    // æœªé€šè¿‡ï¼Œè¿”å›é‡æ–°ç”Ÿæˆ
}

// Agent æµè½¬é€»è¾‘
const workflow = new StateGraph(ScriptGenerationState)
  .addNode("extractor", extractorAgent)       // ä¿¡æ¯æå– (ä»…æ¨¡å¼A)
  .addNode("generator", generatorAgent)       // è„šæœ¬ç”Ÿæˆ
  .addNode("checker", complianceAgent)        // åˆè§„æ£€æµ‹
  .addNode("polisher", polisherAgent)         // æ¶¦è‰²è¾“å‡º
  
  // èµ·ç‚¹æ ¹æ®è¾“å…¥æ¨¡å¼è·¯ç”±
  .addConditionalEdges("__start__", routeByInputMode)
  
  // æ¨¡å¼A: æå– -> ç”Ÿæˆ
  .addEdge("extractor", "generator")
  
  // ç”Ÿæˆ -> æ£€æµ‹
  .addEdge("generator", "checker")
  
  // æ£€æµ‹åæ¡ä»¶è·¯ç”±ï¼ˆå¯èƒ½å¾ªç¯ï¼‰
  .addConditionalEdges("checker", routeAfterCompliance)
  
  // æ¶¦è‰² -> ç»“æŸ
  .addEdge("polisher", "__end__");
```

**åŒæ¨¡å¼æµç¨‹å›¾**:
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     __start__    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  routeByInputMode â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                 â”‚                 â”‚
           â–¼                 â”‚                 â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
   â”‚   extractor   â”‚         â”‚         â”‚             â”‚
   â”‚  (æ¨¡å¼A: ASR) â”‚         â”‚         â”‚  (æ¨¡å¼B:    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚         â”‚  ç›´æ¥è·³è¿‡)  â”‚
           â”‚                 â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚                â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   generator   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  (è„šæœ¬ç”Ÿæˆ)   â”‚           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                            â”‚                   â”‚
                            â–¼                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
                    â”‚    checker    â”‚           â”‚
                    â”‚  (åˆè§„æ£€æµ‹)   â”‚           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                            â”‚                   â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
               â”‚    routeAfterCompliance â”‚      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                            â”‚                   â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
              â”‚ (é€šè¿‡)      â”‚             â”‚     â”‚
              â–¼             â”‚   (æœªé€šè¿‡,  â”‚     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   é‡è¯•<3æ¬¡) â”‚     â”‚
     â”‚    polisher   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
     â”‚  (æ¶¦è‰²è¾“å‡º)   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   __end__     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€RAG çŸ¥è¯†åº“è®¾è®¡

### 4.1 çŸ¥è¯†åº“å†…å®¹

| çŸ¥è¯†ç±»å‹ | å†…å®¹ç¤ºä¾‹ | ç”¨é€” |
|---------|---------|------|
| **å†å²ä¼˜ç§€è¯æœ¯** | è¿‡å¾€é«˜è½¬åŒ–ç›´æ’­è„šæœ¬ | é£æ ¼å­¦ä¹ ã€Few-shot ç¤ºä¾‹ |
| **æ¥¼ç›˜æ¨¡æ¿** | ä¸åŒç±»å‹æ¥¼ç›˜çš„ä»‹ç»æ¨¡æ¿ | ç»“æ„å‚è€ƒ |
| **æŠ–éŸ³è¯æœ¯æ¨¡æ¿** | å¼€åœºã€ç•™èµ„ã€é€¼å•è¯æœ¯ | å…³é”®ç¯èŠ‚å‚è€ƒ |
| **è¡Œä¸šæœ¯è¯­** | æˆ¿äº§ä¸“ä¸šæœ¯è¯­è§£é‡Š | æœ¯è¯­æ ‡å‡†åŒ– |

### 4.2 æ£€ç´¢ç­–ç•¥

```typescript
// æ ¹æ®æ¥¼ç›˜ç±»å‹å’Œç‰¹å¾æ£€ç´¢ç›¸ä¼¼è¯æœ¯
async function retrieveSimilarScripts(propertyInfo: PropertyInfo) {
  const query = buildQuery(propertyInfo);
  
  // 1. æŒ‰æ¥¼ç›˜ç±»å‹è¿‡æ»¤
  const typeFilter = { propertyType: propertyInfo.propertyType };
  
  // 2. å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢
  const results = await vectorStore.similaritySearch(query, {
    filter: typeFilter,
    k: 5  // è¿”å› top 5 ç›¸ä¼¼è¯æœ¯
  });
  
  return results;
}
```

---

## äº”ã€æ¥¼ç›˜ç±»å‹é€‚é… (Skills)

### 5.1 æ™®é€šä½å®… Skill

```markdown
# æ™®é€šä½å®…è¯æœ¯é£æ ¼

## æ ¸å¿ƒå–ç‚¹ä¾§é‡
- æ€§ä»·æ¯”
- åˆšéœ€/æ”¹å–„éœ€æ±‚
- ç”Ÿæ´»ä¾¿åˆ©æ€§
- é…å¥—å®Œå–„åº¦

## è¯æœ¯é£æ ¼
- äº²æ°‘æ¥åœ°æ°”
- å¼ºè°ƒå®ç”¨æ€§
- ç”Ÿæ´»åœºæ™¯æç»˜
- å®¶åº­æ¸©é¦¨æ„Ÿ

## ç•™èµ„è¯æœ¯
"å®¶äººä»¬ï¼Œè¿™ä¸ªæˆ·å‹çœŸçš„å¤ªé€‚åˆå’±ä»¬åˆšéœ€å®¶åº­äº†ï¼
ä¸‰å®¤ä¸¤å…ï¼Œå—åŒ—é€šé€ï¼Œæ€»ä»·æ‰XXä¸‡ï¼
æƒ³äº†è§£æ›´å¤šä¼˜æƒ çš„ï¼Œè¯„è®ºåŒºæ‰£1ï¼Œæˆ‘ç§ä¿¡å‘ç»™ä½ ï¼"
```

### 5.2 è±ªå®… Skill

```markdown
# è±ªå®…è¯æœ¯é£æ ¼

## æ ¸å¿ƒå–ç‚¹ä¾§é‡
- ç¨€ç¼ºæ€§
- å“è´¨æ„Ÿ
- åœˆå±‚ä»·å€¼
- èµ„äº§é…ç½®

## è¯æœ¯é£æ ¼
- é«˜ç«¯å¤§æ°”
- å¼ºè°ƒå“è´¨ç»†èŠ‚
- ç”Ÿæ´»æ–¹å¼æç»˜
- èº«ä»½è®¤åŒæ„Ÿ

## ç•™èµ„è¯æœ¯
"è¿™ä¸ªé¡¹ç›®ï¼Œè¯´å®è¯ä¸æ˜¯æ‰€æœ‰äººéƒ½é€‚åˆã€‚
å®ƒé’ˆå¯¹çš„æ˜¯å¯¹ç”Ÿæ´»å“è´¨æœ‰æé«˜è¦æ±‚çš„ç²¾è‹±äººç¾¤ã€‚
å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä¸€å¤„èƒ½å¤ŸåŒ¹é…æ‚¨èº«ä»½çš„å±…æ‰€ï¼Œ
å¯ä»¥ç§ä¿¡æˆ‘ï¼Œæˆ‘ç»™æ‚¨å®‰æ’ä¸€å¯¹ä¸€çš„ä¸“å±è®²è§£ã€‚"
```

---

## å…­ã€å®ç°è·¯å¾„

### 6.1 ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ (MVP)

**ç›®æ ‡**: å®ç°åŸºç¡€çš„è¯æœ¯ç”Ÿæˆæµç¨‹

**åŠŸèƒ½èŒƒå›´**:
- [ ] ä¿¡æ¯æå– Agentï¼ˆä» ASR æå–æ¥¼ç›˜ä¿¡æ¯ï¼‰
- [ ] è„šæœ¬ç”Ÿæˆ Agentï¼ˆç”ŸæˆåŸºç¡€ç›´æ’­è„šæœ¬ï¼‰
- [ ] è¿ç¦è¯æ£€æµ‹ï¼ˆå†…ç½®è§„åˆ™åŒ¹é…ï¼‰
- [ ] åŸºç¡€æ¶¦è‰²è¾“å‡º

**æŠ€æœ¯å®ç°**:
- LangGraph å¤šæ™ºèƒ½ä½“æ¡†æ¶æ­å»º
- åŸºç¡€ Prompt å·¥ç¨‹
- è¿ç¦è¯è§„åˆ™å¼•æ“

**é¢„è®¡æ—¶é—´**: 2-3 å‘¨

---

### 6.2 ç¬¬äºŒé˜¶æ®µï¼šçŸ¥è¯†å¢å¼º

**ç›®æ ‡**: å¼•å…¥ RAG æå‡ç”Ÿæˆè´¨é‡

**åŠŸèƒ½èŒƒå›´**:
- [ ] å†å²è¯æœ¯å‘é‡åŒ–å­˜å‚¨
- [ ] ç›¸ä¼¼è¯æœ¯æ£€ç´¢
- [ ] Few-shot ç¤ºä¾‹æ³¨å…¥
- [ ] æ¥¼ç›˜ç±»å‹é€‚é…ï¼ˆæ™®é€šä½å®…/è±ªå®…ï¼‰

**æŠ€æœ¯å®ç°**:
- å‘é‡æ•°æ®åº“æ¥å…¥ï¼ˆChromaï¼‰
- RAG æ£€ç´¢ç®¡é“
- Skills åŠ¨æ€åŠ è½½

**é¢„è®¡æ—¶é—´**: 2 å‘¨

---

### 6.3 ç¬¬ä¸‰é˜¶æ®µï¼šä½“éªŒä¼˜åŒ–

**ç›®æ ‡**: æå‡ç”¨æˆ·ä½“éªŒå’Œç”Ÿæˆè´¨é‡

**åŠŸèƒ½èŒƒå›´**:
- [ ] æµå¼è¾“å‡ºï¼ˆé€å­—ç”Ÿæˆæ•ˆæœï¼‰
- [ ] è„šæœ¬ç¼–è¾‘/å¾®è°ƒåŠŸèƒ½
- [ ] å¤šç‰ˆæœ¬å¯¹æ¯”
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†

**æŠ€æœ¯å®ç°**:
- SSE æµå¼è¾“å‡º
- å‰ç«¯ç¼–è¾‘å™¨é›†æˆ
- åé¦ˆæ•°æ®æ”¶é›†

**é¢„è®¡æ—¶é—´**: 2 å‘¨

---

## ä¸ƒã€æ¥å£è®¾è®¡

### 7.1 æ¨¡å¼A: ASR æå–ç”Ÿæˆæ¥å£

```typescript
// POST /api/script/generate/asr
interface AsrGenerateRequest {
  asrText: string;              // ASR æ–‡æœ¬ (å¿…å¡«)
  propertyType?: 'residential' | 'luxury';  // æ¥¼ç›˜ç±»å‹ï¼ˆå¯é€‰ï¼Œè‡ªåŠ¨è¯†åˆ«ï¼‰
  style?: 'energetic' | 'professional' | 'warm';  // è¯æœ¯é£æ ¼ï¼ˆå¯é€‰ï¼‰
}

interface GenerateScriptResponse {
  scriptId: string;
  inputMode: 'asr' | 'manual';
  propertyInfo: PropertyInfo;   // æå–/è§£æçš„æ¥¼ç›˜ä¿¡æ¯
  script: LiveScript;           // ç”Ÿæˆçš„è„šæœ¬
  complianceReport: {
    passed: boolean;
    issues: ComplianceIssue[];
  };
  metadata: {
    generatedAt: string;
    processingTime: number;
  };
}
```

### 7.2 æ¨¡å¼B: æ‰‹åŠ¨è¾“å…¥ç”Ÿæˆæ¥å£

```typescript
// POST /api/script/generate/manual
interface ManualGenerateRequest {
  // ====== å¿…å¡«å­—æ®µ ======
  projectName: string;          // é¡¹ç›®åç§°
  location: string;             // é¡¹ç›®ä½ç½®
  propertyType: 'residential' | 'luxury';  // æ¥¼ç›˜ç±»å‹
  layoutDescription: string;    // æˆ·å‹æè¿°
  
  // ====== å¯é€‰å­—æ®µ - å–ç‚¹ä¿¡æ¯ ======
  sellingPoints?: string[];     // æ ¸å¿ƒå–ç‚¹åˆ—è¡¨
  
  // ====== å¯é€‰å­—æ®µ - ç¦åˆ©ä¿¡æ¯ ======
  promotions?: string[];        // ä¼˜æƒ æ´»åŠ¨
  gifts?: string[];             // ç¤¼å“ä¿¡æ¯
  
  // ====== å…¶ä»–å¯é€‰ ======
  developer?: string;           // å¼€å‘å•†
  surroundings?: string;        // å‘¨è¾¹é…å¥—æè¿°
  style?: 'energetic' | 'professional' | 'warm';  // è¯æœ¯é£æ ¼
}

// å“åº”ä¸æ¨¡å¼Aç›¸åŒï¼Œä½¿ç”¨ GenerateScriptResponse
```

### 7.3 æµå¼ç”Ÿæˆæ¥å£

```typescript
// POST /api/script/generate/stream
// æ”¯æŒä¸¤ç§æ¨¡å¼ï¼Œé€šè¿‡ inputMode åŒºåˆ†
interface StreamGenerateRequest {
  inputMode: 'asr' | 'manual';
  
  // æ¨¡å¼Aå­—æ®µ
  asrText?: string;
  
  // æ¨¡å¼Bå­—æ®µ
  projectName?: string;
  location?: string;
  propertyType?: 'residential' | 'luxury';
  layoutDescription?: string;
  sellingPoints?: string[];
  promotions?: string[];
  gifts?: string[];
  
  // é€šç”¨å¯é€‰
  style?: 'energetic' | 'professional' | 'warm';
}

// è¿”å› SSE æµå¼äº‹ä»¶
type StreamEvent = 
  | { event: 'start', data: { inputMode: 'asr' | 'manual' } }
  | { event: 'extracting', data: { progress: number } }  // ä»…æ¨¡å¼A
  | { event: 'property_info', data: PropertyInfo }
  | { event: 'generating', data: { section: string } }
  | { event: 'stream_token', data: { token: string } }   // æµå¼æ–‡æœ¬
  | { event: 'compliance', data: ComplianceReport }
  | { event: 'compliance_retry', data: { attempt: number, issues: string[] } }
  | { event: 'polishing', data: { progress: number } }
  | { event: 'complete', data: LiveScript };
```

### 7.4 å‰ç«¯è¡¨å•ç¤ºä¾‹ (æ¨¡å¼B)

```tsx
// æ‰‹åŠ¨è¾“å…¥è¡¨å•ç»„ä»¶
interface ScriptFormProps {
  onSubmit: (data: ManualGenerateRequest) => void;
}

function ScriptGeneratorForm({ onSubmit }: ScriptFormProps) {
  return (
    <form>
      {/* ========== å¿…å¡«åŒºåŸŸ ========== */}
      <section className="required-section">
        <h3>ğŸ“ æ¥¼ç›˜åŸºæœ¬ä¿¡æ¯ <span className="required">*å¿…å¡«</span></h3>
        
        <input name="projectName" placeholder="é¡¹ç›®åç§°" required />
        <input name="location" placeholder="é¡¹ç›®ä½ç½®" required />
        <select name="propertyType" required>
          <option value="residential">æ™®é€šä½å®…</option>
          <option value="luxury">è±ªå®…</option>
        </select>
        <textarea name="layoutDescription" placeholder="æˆ·å‹æè¿°ï¼ˆå¦‚ï¼šä¸»æ¨89ã¡ä¸‰å®¤ä¸¤å…...ï¼‰" required />
      </section>
      
      {/* ========== å¯é€‰åŒºåŸŸ - å–ç‚¹ ========== */}
      <section className="optional-section">
        <h3>ğŸ’ å–ç‚¹ä¿¡æ¯ <span className="optional">å¯é€‰</span></h3>
        
        <textarea 
          name="sellingPoints" 
          placeholder="æ ¸å¿ƒå–ç‚¹ï¼ˆæ¯è¡Œä¸€æ¡ï¼Œå¦‚ï¼š&#10;åœ°é“ä¸Šç›–&#10;å“ç‰Œå¼€å‘å•†&#10;ä½å¯†ç¤¾åŒºï¼‰"
        />
      </section>
      
      {/* ========== å¯é€‰åŒºåŸŸ - ç¦åˆ© ========== */}
      <section className="optional-section">
        <h3>ğŸ ç¦åˆ©ä¿¡æ¯ <span className="optional">å¯é€‰</span></h3>
        
        <textarea name="promotions" placeholder="ä¼˜æƒ æ´»åŠ¨ï¼ˆå¦‚ï¼šé¦–ä»˜åˆ†æœŸã€å¥‘ç¨è¡¥è´´ï¼‰" />
        <textarea name="gifts" placeholder="ç¤¼å“ä¿¡æ¯ï¼ˆå¦‚ï¼šåˆ°è®¿é€å’–å•¡æœºã€æˆäº¤é€å®¶ç”µï¼‰" />
      </section>
      
      <button type="submit">ğŸš€ ç”Ÿæˆç›´æ’­è¯æœ¯</button>
    </form>
  );
}
```

---

## å…«ã€å†…å®¹å¤šæ ·æ€§ä¿éšœæœºåˆ¶

### 8.1 é—®é¢˜åˆ†æï¼šä¸ºä»€ä¹ˆä¼šåŒè´¨åŒ–ï¼Ÿ

| åŸå›  | å…·ä½“è¡¨ç° |
|-----|---------|
| **LLM è®­ç»ƒæ¨¡å¼** | æ¨¡å‹å­¦ä¹ äº†å¤§é‡ç›¸ä¼¼çš„è¥é”€æ–‡æ¡ˆï¼Œå€¾å‘äºç”Ÿæˆ"å®‰å…¨"çš„é€šç”¨å¥—è·¯ |
| **Prompt ç»“æ„å›ºå®š** | ç›¸åŒçš„ prompt æ¨¡æ¿ â†’ ç›¸ä¼¼çš„è¾“å‡ºç»“æ„ |
| **æ¸©åº¦å‚æ•°ä½** | é»˜è®¤ä½æ¸©åº¦è®©è¾“å‡ºæ›´ç¡®å®šï¼Œä½†ä¹Ÿæ›´å•ä¸€ |
| **ç¼ºä¹ä¸ªæ€§åŒ–** | æ²¡æœ‰åŒºåˆ†ä¸»æ’­é£æ ¼ã€æ¥¼ç›˜è°ƒæ€§ã€ç›®æ ‡å®¢ç¾¤ |

### 8.2 å¤šæ ·æ€§è§£å†³æ–¹æ¡ˆ

#### ç­–ç•¥ä¸€ï¼šä¸»æ’­äººè®¾ç³»ç»Ÿ â­ æ¨è

å®šä¹‰ä¸åŒçš„ä¸»æ’­äººè®¾ï¼Œæ¯ç§äººè®¾æœ‰ç‹¬ç‰¹çš„è¯´è¯é£æ ¼ï¼š

```typescript
interface HostPersona {
  id: string;
  name: string;                    // äººè®¾åç§°
  style: string;                   // é£æ ¼æè¿°
  tone: string;                    // è¯­æ°”ç‰¹ç‚¹
  catchphrases: string[];          // æ ‡å¿—æ€§å£å¤´ç¦…
  openingTemplates: string[];      // å¼€åœºç™½æ¨¡æ¿
  transitionPhrases: string[];     // è¿‡æ¸¡è¯­
  closingTemplates: string[];      // æ”¶å°¾æ¨¡æ¿
}

const hostPersonas: HostPersona[] = [
  {
    id: 'energetic',
    name: 'æ´»åŠ›å‹ä¸»æ’­',
    style: 'çƒ­æƒ…æ´‹æº¢ã€èŠ‚å¥å¿«ã€æ„ŸæŸ“åŠ›å¼º',
    tone: 'å…´å¥‹ã€ç§¯æã€æœ‰æ„Ÿå¬åŠ›',
    catchphrases: ['ç»ç»å­', 'å®¶äººä»¬å†²', 'è¿™æ³¢ç¨³äº†', 'ç›´æ¥æ‹¿ä¸‹'],
    openingTemplates: [
      'å®¶äººä»¬ï¼ä»Šå¤©è¿™ä¸ªç›˜ï¼Œæˆ‘çœŸçš„ç­‰ä¸åŠè¦ç»™ä½ ä»¬çœ‹äº†ï¼',
      'å®å­ä»¬æ¥äº†å—ï¼Ÿä»Šå¤©è¦ç»™ä½ ä»¬ç‚¸ä¸€ä¸ªç‹ç‚¸æ¥¼ç›˜ï¼',
      'å§å¦¹ä»¬å…„å¼Ÿä»¬ï¼å‡†å¤‡å¥½ä½ ä»¬çš„å°æœ¬æœ¬ï¼Œä»Šå¤©è¿™ä¸ªç›˜å€¼å¾—è®°ï¼'
    ],
    transitionPhrases: ['é‡ç‚¹æ¥äº†ï¼', 'æ³¨æ„å¬ï¼', 'åˆ’é‡ç‚¹ï¼'],
    closingTemplates: ['å†²å°±å®Œäº‹äº†ï¼', 'è¿™æ³¢ä¸å†²ç­‰å•¥å‘¢ï¼Ÿ']
  },
  {
    id: 'professional',
    name: 'ä¸“ä¸šå‹ä¸»æ’­',
    style: 'æ²‰ç¨³ä¸“ä¸šã€æ•°æ®è¯´è¯ã€ç†æ€§åˆ†æ',
    tone: 'å®¢è§‚ã€ä¸“ä¸šã€å¯ä¿¡èµ–',
    catchphrases: ['ä»æ•°æ®æ¥çœ‹', 'å®¢è§‚æ¥è¯´', 'ç»¼åˆåˆ†æ'],
    openingTemplates: [
      'å„ä½å¥½ï¼Œä»Šå¤©ä¸ºå¤§å®¶è¯¦ç»†è§£è¯»ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„é¡¹ç›®ã€‚',
      'æ¬¢è¿æ¥åˆ°ç›´æ’­é—´ï¼Œä»Šå¤©æˆ‘ä»¬æ¥æ·±åº¦åˆ†æè¿™ä¸ªæ¥¼ç›˜çš„æŠ•èµ„ä»·å€¼ã€‚',
      'å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ç»™å¤§å®¶åšä¸€ä¸ªå…¨æ–¹ä½çš„æ¥¼ç›˜æµ‹è¯„ã€‚'
    ],
    transitionPhrases: ['æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹', 'ä»ä¸“ä¸šè§’åº¦åˆ†æ', 'æ•°æ®æ˜¾ç¤º'],
    closingTemplates: ['ä»¥ä¸Šæ˜¯æˆ‘çš„ä¸“ä¸šåˆ†æï¼Œä¾›å¤§å®¶å‚è€ƒã€‚']
  },
  {
    id: 'storyteller',
    name: 'æ•…äº‹å‹ä¸»æ’­',
    style: 'å¨“å¨“é“æ¥ã€åœºæ™¯æç»˜ã€æƒ…æ„Ÿå…±é¸£',
    tone: 'æ¸©æš–ã€äº²åˆ‡ã€æœ‰ç”»é¢æ„Ÿ',
    catchphrases: ['æƒ³è±¡ä¸€ä¸‹', 'ä½ æœ‰æ²¡æœ‰æƒ³è¿‡', 'æˆ‘ç»™ä½ æç»˜ä¸€ä¸‹'],
    openingTemplates: [
      'ä»Šå¤©æƒ³è·Ÿå¤§å®¶èŠä¸€ä¸ªç‰¹åˆ«æœ‰æ„æ€çš„æ¥¼ç›˜æ•…äº‹...',
      'ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œç†æƒ³çš„å®¶åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ',
      'æˆ‘å‰ä¸¤å¤©å»çœ‹äº†ä¸€ä¸ªç›˜ï¼ŒçœŸçš„è¢«æ‰“åŠ¨åˆ°äº†ï¼Œæƒ³åˆ†äº«ç»™ä½ ä»¬...'
    ],
    transitionPhrases: ['æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯', 'æˆ‘æ¥ç»™ä½ æç»˜', 'ä½ é—­ä¸Šçœ¼ç›æƒ³'],
    closingTemplates: ['è¿™å°±æ˜¯æˆ‘æƒ³åˆ†äº«ç»™ä½ ä»¬çš„å®¶çš„æ•…äº‹ã€‚']
  },
  {
    id: 'local_expert',
    name: 'æœ¬åœ°é€šå‹ä¸»æ’­',
    style: 'æ¥åœ°æ°”ã€ç†Ÿæ‚‰æœ¬åœ°ã€åƒæœ‹å‹èŠå¤©',
    tone: 'äº²åˆ‡ã€å®åœ¨ã€å¯ä¿¡èµ–',
    catchphrases: ['è·Ÿä½ è¯´å®è¯', 'æˆ‘è·Ÿä½ è®²', 'è¿™ä¸ªæˆ‘å¤ªç†Ÿäº†'],
    openingTemplates: [
      'è€é“ä»¬ï¼Œä»Šå¤©è¿™ä¸ªç›˜åœ¨å’±ä»¬æœ¬åœ°å¯æ˜¯æœ‰åçš„...',
      'å…„å¼Ÿå§å¦¹ä»¬ï¼Œä»Šå¤©èŠçš„è¿™ä¸ªä½ç½®ï¼Œæˆ‘å¤ªç†Ÿäº†ï¼',
      'å¤§å®¶å¥½ï¼Œä»Šå¤©è¦è¯´çš„è¿™ä¸ªæ¥¼ç›˜ï¼Œæˆ‘è‡ªå·±éƒ½å¿ƒåŠ¨äº†ã€‚'
    ],
    transitionPhrases: ['è·Ÿä½ è¯´å®è¯', 'æˆ‘é€éœ²ä¸€ä¸ªå†…éƒ¨æ¶ˆæ¯', 'è¿™ä¸ªå¾ˆå¤šäººä¸çŸ¥é“'],
    closingTemplates: ['ä¿¡æˆ‘çš„ï¼Œè¿™ä¸ªçœŸçš„å¯ä»¥çœ‹çœ‹ã€‚']
  }
];
```

#### ç­–ç•¥äºŒï¼šæ¨¡å—åŒ–è„šæœ¬ç»„è£…

å°†è„šæœ¬æ‹†åˆ†ä¸ºå¤šä¸ªå¯æ›¿æ¢æ¨¡å—ï¼Œéšæœºç»„åˆï¼š

```typescript
interface ScriptModule {
  type: 'opening' | 'project_intro' | 'layout' | 'surroundings' | 'lead_gen' | 'closing';
  variants: {
    id: string;
    style: string;       // é£æ ¼æ ‡ç­¾
    template: string;    // æ¨¡æ¿å†…å®¹ï¼ˆæ”¯æŒå˜é‡å ä½ï¼‰
  }[];
}

// ç¤ºä¾‹ï¼šå¼€åœºæ¨¡å—çš„å¤šä¸ªå˜ä½“
const openingVariants = [
  {
    id: 'hook_question',
    style: 'interactive',
    template: 'å®¶äººä»¬ï¼Œåœ¨{location}å·¥ä½œç”Ÿæ´»çš„æ‰£1ï¼ä»Šå¤©è¿™ä¸ªç›˜å°±åœ¨è¿™ä¸ªåŒºåŸŸï¼'
  },
  {
    id: 'hook_story',
    style: 'narrative',
    template: 'ä¸Šå‘¨æœ‰ä¸ªç²‰ä¸ç§ä¿¡æˆ‘ï¼Œè¯´åœ¨{location}æ‰¾äº†åŠå¹´æˆ¿å­ï¼Œä»Šå¤©è¿™ä¸ªç›˜æˆ‘è§‰å¾—ç‰¹åˆ«é€‚åˆä»–...'
  },
  {
    id: 'hook_data',
    style: 'professional',
    template: 'ä»Šå¤©è¦è®²çš„{projectName}ï¼Œä¸Šä¸ªæœˆæˆäº¤äº†XXå¥—ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆç«ï¼Ÿæˆ‘æ¥ç»™å¤§å®¶åˆ†æä¸€ä¸‹ã€‚'
  },
  {
    id: 'hook_direct',
    style: 'straightforward',
    template: 'è¯ä¸å¤šè¯´ï¼Œä»Šå¤©è¿™ä¸ª{projectName}ï¼Œä¸‰ä¸ªå­—ï¼šå€¼å¾—çœ‹ï¼'
  }
];

// è„šæœ¬ç”Ÿæˆæ—¶éšæœºé€‰æ‹©æˆ–æ ¹æ®é£æ ¼åŒ¹é…
function selectVariant(variants: Variant[], preferredStyle?: string) {
  if (preferredStyle) {
    const matched = variants.filter(v => v.style === preferredStyle);
    return matched[Math.floor(Math.random() * matched.length)];
  }
  return variants[Math.floor(Math.random() * variants.length)];
}
```

#### ç­–ç•¥ä¸‰ï¼šRAG æ£€ç´¢å¤šæ ·æ€§

ç¡®ä¿ RAG æ£€ç´¢è¿”å›ä¸åŒé£æ ¼çš„æ¡ˆä¾‹ï¼š

```typescript
async function retrieveDiverseScripts(propertyInfo: PropertyInfo, count: number = 5) {
  // 1. ç›¸ä¼¼åº¦æ£€ç´¢
  const similarResults = await vectorStore.similaritySearch(
    buildQuery(propertyInfo),
    { k: count * 2 }  // å¤šæ£€ç´¢ä¸€äº›
  );
  
  // 2. å¤šæ ·æ€§è¿‡æ»¤ï¼šç¡®ä¿è¿”å›çš„æ¡ˆä¾‹é£æ ¼ä¸åŒ
  const diverseResults = ensureDiversity(similarResults, {
    diversityFields: ['style', 'hostType', 'openingStyle'],
    minDiversity: 0.6  // è‡³å°‘60%çš„æ¡ˆä¾‹é£æ ¼ä¸åŒ
  });
  
  // 3. è¿”å›å¤šæ ·åŒ–çš„æ¡ˆä¾‹
  return diverseResults.slice(0, count);
}

// MMR (Maximal Marginal Relevance) å¤šæ ·æ€§ç®—æ³•
function ensureDiversity(results: SearchResult[], options: DiversityOptions) {
  const selected: SearchResult[] = [];
  const remaining = [...results];
  
  while (selected.length < options.targetCount && remaining.length > 0) {
    // é€‰æ‹©ä¸å·²é€‰ç»“æœæœ€ä¸ç›¸ä¼¼çš„
    const nextBest = remaining.reduce((best, current) => {
      const similarityToSelected = selected.length === 0 
        ? 0 
        : Math.max(...selected.map(s => computeSimilarity(s, current)));
      const marginalRelevance = current.score - options.lambda * similarityToSelected;
      return marginalRelevance > best.score ? { item: current, score: marginalRelevance } : best;
    }, { item: remaining[0], score: -Infinity });
    
    selected.push(nextBest.item);
    remaining.splice(remaining.indexOf(nextBest.item), 1);
  }
  
  return selected;
}
```

#### ç­–ç•¥å››ï¼šæ¸©åº¦ä¸é‡‡æ ·å‚æ•°åŠ¨æ€è°ƒæ•´

```typescript
interface GenerationConfig {
  // ä¸åŒéƒ¨åˆ†ä½¿ç”¨ä¸åŒçš„æ¸©åº¦
  temperatureBySection: {
    opening: number;      // å¼€åœºç™½ - é«˜æ¸©åº¦ï¼Œæ›´å¤šåˆ›æ„
    projectFacts: number; // é¡¹ç›®äº‹å® - ä½æ¸©åº¦ï¼Œç¡®ä¿å‡†ç¡®
    sellingPoints: number;// å–ç‚¹åŒ…è£… - ä¸­ç­‰æ¸©åº¦
    leadGen: number;      // ç•™èµ„è¯æœ¯ - é«˜æ¸©åº¦ï¼Œå¤šæ ·è¡¨è¾¾
    closing: number;      // æ”¶å°¾ - ä¸­ç­‰æ¸©åº¦
  };
  
  // Top-p é‡‡æ ·
  topP: number;
  
  // é¢‘ç‡æƒ©ç½šï¼šé™ä½é‡å¤ç”¨è¯
  frequencyPenalty: number;
  
  // å­˜åœ¨æƒ©ç½šï¼šé¼“åŠ±æ–°è¯é¢˜
  presencePenalty: number;
}

const diverseConfig: GenerationConfig = {
  temperatureBySection: {
    opening: 0.9,        // å¼€åœºéœ€è¦åˆ›æ„
    projectFacts: 0.3,   // äº‹å®éœ€è¦å‡†ç¡®
    sellingPoints: 0.7,  // å–ç‚¹éœ€è¦åŒ…è£…
    leadGen: 0.8,        // ç•™èµ„éœ€è¦å˜åŒ–
    closing: 0.6
  },
  topP: 0.95,
  frequencyPenalty: 0.5,  // å‡å°‘é‡å¤è¯
  presencePenalty: 0.3    // é¼“åŠ±æ–°è¡¨è¾¾
};
```

#### ç­–ç•¥äº”ï¼šç”¨æˆ·åå¥½å­¦ä¹ 

```typescript
interface UserPreference {
  userId: string;
  
  // é£æ ¼åå¥½ï¼ˆä»å†å²åé¦ˆä¸­å­¦ä¹ ï¼‰
  preferredStyles: {
    hostPersona: string;     // åå¥½çš„ä¸»æ’­äººè®¾
    openingStyle: string;    // åå¥½çš„å¼€åœºæ–¹å¼
    detailLevel: 'brief' | 'detailed';  // è¯¦ç»†ç¨‹åº¦
    emotionalTone: 'rational' | 'emotional';  // ç†æ€§/æ„Ÿæ€§
  };
  
  // ç¦ç”¨çš„è¡¨è¾¾ï¼ˆç”¨æˆ·æ ‡è®°è¿‡çš„"ä¸å–œæ¬¢"ï¼‰
  dislikedPhrases: string[];
  
  // å–œæ¬¢çš„è¡¨è¾¾
  likedPhrases: string[];
}

// æ ¹æ®ç”¨æˆ·åå¥½è°ƒæ•´ç”Ÿæˆ
function applyUserPreference(
  generatedScript: LiveScript,
  preference: UserPreference
): LiveScript {
  // 1. æ›¿æ¢ä¸å–œæ¬¢çš„è¡¨è¾¾
  // 2. å¢åŠ å–œæ¬¢çš„é£æ ¼å…ƒç´ 
  // 3. è°ƒæ•´è¯¦ç»†ç¨‹åº¦
  return adjustedScript;
}
```

### 8.3 å®ç°ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | ç­–ç•¥ | å®ç°å¤æ‚åº¦ | æ•ˆæœ |
|-------|------|-----------|------|
| ğŸ¥‡ P0 | ä¸»æ’­äººè®¾ç³»ç»Ÿ | ä¸­ | æ˜¾è‘— |
| ğŸ¥ˆ P1 | æ¨¡å—åŒ–è„šæœ¬ç»„è£… | ä¸­ | æ˜¾è‘— |
| ğŸ¥‰ P2 | æ¸©åº¦åŠ¨æ€è°ƒæ•´ | ä½ | ä¸­ç­‰ |
| P3 | RAG å¤šæ ·æ€§æ£€ç´¢ | é«˜ | æ˜¾è‘— |
| P4 | ç”¨æˆ·åå¥½å­¦ä¹  | é«˜ | é•¿æœŸ |

### 8.4 æ•ˆæœè¯„ä¼°æŒ‡æ ‡

```typescript
interface DiversityMetrics {
  // æ–‡æœ¬ç›¸ä¼¼åº¦ï¼ˆåŒä¸€ç”¨æˆ·ç”Ÿæˆçš„å¤šä¸ªè„šæœ¬ä¹‹é—´ï¼‰
  intraUserSimilarity: number;   // ç›®æ ‡: < 0.6
  
  // ç»“æ„å¤šæ ·æ€§ï¼ˆå¼€åœºæ–¹å¼ã€è¿‡æ¸¡è¯­åˆ†å¸ƒï¼‰
  structuralVariety: number;     // ç›®æ ‡: > 0.7
  
  // è¯æ±‡ä¸°å¯Œåº¦
  vocabularyRichness: number;    // ç›®æ ‡: > 0.8
  
  // ç”¨æˆ·æ»¡æ„åº¦ï¼ˆåé¦ˆæ”¶é›†ï¼‰
  userSatisfaction: number;      // ç›®æ ‡: > 4.0/5.0
}
```

---

## ä¹ã€é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|-----|------|---------|
| ASR æ–‡æœ¬è´¨é‡å·® | ä¿¡æ¯æå–ä¸å‡†ç¡® | å¢åŠ å®¹é”™å¤„ç†ï¼Œæ”¯æŒäººå·¥è¡¥å…… |
| è¿ç¦è¯åº“ä¸å®Œå–„ | åˆè§„é£é™© | å®šæœŸæ›´æ–°ï¼Œæ”¯æŒè‡ªå®šä¹‰æ·»åŠ  |
| **ç”Ÿæˆè¯æœ¯åŒè´¨åŒ–** | **ç”¨æˆ·ä½“éªŒä¸‹é™** | **ä¸»æ’­äººè®¾+æ¨¡å—åŒ–ç»„è£…+æ¸©åº¦è°ƒä¼˜ï¼ˆè¯¦è§ç¬¬å…«ç« ï¼‰** |
| LLM æˆæœ¬è¾ƒé«˜ | è¿è¥æˆæœ¬ä¸Šå‡ | ç¼“å­˜å¸¸è§åœºæ™¯ï¼Œæ‰¹é‡å¤„ç† |

---

## ä¹ã€åç»­è§„åˆ’

1. **è¯­éŸ³åˆæˆé›†æˆ**: ç”Ÿæˆè„šæœ¬åå¯ç›´æ¥åˆæˆè¯­éŸ³ï¼Œç”¨äºé¢„æ¼”
2. **ç›´æ’­æ•°æ®åˆ†æ**: æ¥å…¥ç›´æ’­æ•°æ®ï¼Œåˆ†æè¯æœ¯æ•ˆæœï¼ŒæŒç»­ä¼˜åŒ–
3. **å¤šå¹³å°æ”¯æŒ**: æ‰©å±•æ”¯æŒè§†é¢‘å·ã€å¿«æ‰‹ç­‰å¹³å°
4. **å›¢é˜Ÿåä½œ**: æ”¯æŒå¤šäººåä½œç¼–è¾‘ã€å®¡æ ¸æµç¨‹

---

## é™„å½•

### A. ç›®å½•ç»“æ„ï¼ˆå»ºè®®ï¼‰

```
real-estate-script-generator/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â”œâ”€â”€ extractor.ts      # ä¿¡æ¯æå– Agent
â”‚   â”‚   â”‚   â”œâ”€â”€ generator.ts      # è„šæœ¬ç”Ÿæˆ Agent
â”‚   â”‚   â”‚   â”œâ”€â”€ compliance.ts     # åˆè§„æ£€æµ‹ Agent
â”‚   â”‚   â”‚   â””â”€â”€ polisher.ts       # æ¶¦è‰²è¾“å‡º Agent
â”‚   â”‚   â”œâ”€â”€ graph/
â”‚   â”‚   â”‚   â””â”€â”€ workflow.ts       # LangGraph å·¥ä½œæµ
â”‚   â”‚   â”œâ”€â”€ rag/
â”‚   â”‚   â”‚   â”œâ”€â”€ vectorStore.ts    # å‘é‡å­˜å‚¨
â”‚   â”‚   â”‚   â””â”€â”€ retriever.ts      # æ£€ç´¢å™¨
â”‚   â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”‚   â””â”€â”€ prohibited.ts     # è¿ç¦è¯è§„åˆ™
â”‚   â”‚   â”œâ”€â”€ skills/
â”‚   â”‚   â”‚   â”œâ”€â”€ residential/      # æ™®é€šä½å®… Skill
â”‚   â”‚   â”‚   â””â”€â”€ luxury/           # è±ªå®… Skill
â”‚   â”‚   â””â”€â”€ server.ts             # Express æœåŠ¡
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ ScriptGenerator.tsx
â”‚   â”‚   â””â”€â”€ components/
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md
```

### B. å‚è€ƒèµ„æº

- [LangGraph æ–‡æ¡£](https://langchain-ai.github.io/langgraph/)
- [æŠ–éŸ³ç›´æ’­è§„èŒƒ](https://www.douyin.com/creator/content/live)
- [æˆ¿åœ°äº§å¹¿å‘Šå‘å¸ƒè§„å®š](http://www.gov.cn/zhengce/)
